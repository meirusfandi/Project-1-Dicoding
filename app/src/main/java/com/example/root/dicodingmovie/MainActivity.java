package com.example.root.dicodingmovie;import android.app.LoaderManager;import android.app.ProgressDialog;import android.content.Intent;import android.content.Loader;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.text.TextUtils;import android.view.View;import android.widget.AdapterView;import android.widget.Button;import android.widget.EditText;import android.widget.ListView;import java.util.ArrayList;public class MainActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks<ArrayList<MyModel>>{    ListView listView;    EditText editCari;    Button btnCari;    MyAdapter adapter;    ProgressDialog dialog;    static final String EXTRA_MOVIE = "EXTRAS_MOVIE";    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        adapter     = new MyAdapter(this);        adapter.notifyDataSetChanged();        listView    = (ListView)findViewById(R.id.list_movie);        listView.setAdapter(adapter);        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                MyModel model = (MyModel)parent.getItemAtPosition(position);                Intent intent = new Intent(MainActivity.this, DetailMovieActivity.class);                String poster = "";                if (model.getBackdrop_path().isEmpty()){                    poster  = model.getIcon_path();                } else {                    poster  = model.getBackdrop_path();                }                intent.putExtra(DetailMovieActivity.EXTRA_TITLE, model.getTitle());                intent.putExtra(DetailMovieActivity.EXTRA_OVERVIEW, model.getOverview());                intent.putExtra(DetailMovieActivity.EXTRA_RELEASE_DATE, model.getRelease());                intent.putExtra(DetailMovieActivity.EXTRA_POSTER_JPG, poster);                startActivity(intent);            }        });        editCari    = (EditText)findViewById(R.id.editCari);        btnCari     = (Button)findViewById(R.id.btnCari);        btnCari.setOnClickListener(listener);        dialog  = new ProgressDialog(this);        dialog.setMessage("Sedang mencari "+editCari.getText().toString());        dialog.setCancelable(false);        String cariJudul = editCari.getText().toString();        Bundle bundle = new Bundle();        bundle.putString(EXTRA_MOVIE, cariJudul);        getLoaderManager().initLoader(0, bundle, this);    }    @Override    public Loader<ArrayList<MyModel>> onCreateLoader(int id, Bundle args) {        String cariJudul = "";        if (args != null){            cariJudul = args.getString(EXTRA_MOVIE);        }        return new MyAsyncTaskLoader(this, cariJudul);    }    @Override    public void onLoadFinished(Loader<ArrayList<MyModel>> loader, ArrayList<MyModel> data) {        adapter.setData(data);        dialog.dismiss();    }    @Override    public void onLoaderReset(Loader<ArrayList<MyModel>> loader) {        adapter.setData(null);    }    View.OnClickListener listener = new View.OnClickListener() {        @Override        public void onClick(View v) {            dialog.show();            String cariJudul = editCari.getText().toString();            if (TextUtils.isEmpty(cariJudul))                return;            Bundle bundle = new Bundle();            bundle.putString(EXTRA_MOVIE, cariJudul);            getLoaderManager().restartLoader(0, bundle, MainActivity.this);        }    };}